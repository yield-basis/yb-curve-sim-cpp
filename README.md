Rewrite using C++ simulator from https://github.com/heswithme/curve-sim-cpp
